Доброе утро, день, вечер.

В ESP-32 имеется множество пинов, которые выполняют разные функции.
Самые простые - это Земля, на схемах обозначается как GROUND
3v3 В и 5V, они работают в соответствии с названием и выдвают напряжение 3.3В и 5В
А другие пины могут быть назначены на специальный функционал, например для шины SPI, I2C или UART.
Пины можно разбивать по функционалу, а так же по распайке компонентов.
Начнем с PWM пинов.
Широтно-импульсная модуляция. Этим методом можно изменять мощность подаваемого сигнала. Например для управления яркостью светодиодов. Регулировать скорость моторов. Или создавать аналоговые сигналы из цифровых.
Как это работает?
Включаем сигнал на 1 миллисекунду и выключаем на 1 миллисекунду. Получается 50% дьюти цикл.
То есть соотношение выского состояния к общему половина.
Таким образом имея всего два состояния мы регулируем мощность.

Некоторые пины имеют на схеме обозначение как диоды, они работают только в одну стороны. Обозначаются как л
иния с треугольников расположенным на ней. Эти пины работают только на вход.
Пины с восклицательным знаком используются только для работы с флеш памятью, если попытаться использовать их как обычные gpio, то это может привести к ошибкам.
На схеме имеются RTC пины. Они нужны для связы с внутренними часами esp32. RTC продолжает работать даже после потери питания, таким образом можно меньше потреблять энергии, т.к. основной процессор может быть выключен и внешние устройства будут этим пользоваться.
STRAP пины нужны для выбора режима работы при включении. Например режим прошивки.

Одни из самых интересных пинов, это TOUCH Sensor Input Channel.
Это пины, которые обнаруживают касания. Они настроены не просто на 1 и нуль, а на измерение емкости, что и дает такой интересный функционал. Чувствительность их можно настроить, ведь они могут быть в разной среде, более влажной или пыльной и т.д.

Голубым цветом с надписью DEBUG обозначены JTAG пины, которые нужно для подключения JTAG. По этому интерфейсу можно подключаться к устройствам предназначенным для отладки и иметь больший функционал тестирования. В следующих видео я покажу как использовать JTAG и какие преимущества мы будем иметь в сравнеии с мониторингом и отладкой по UART -> USB.

DAC - позволяет генерировать аналоговые сигналы, которые могут использоваться для управления некоторыми устройствами. Напряжение от 0 до 3.3В, 8 бит, то есть 256 значение. 0 соответствует 0В, а 255 3.3В

ADCX предназначен для считывания аналоговых сигналов и преобразования их в цифровые.

IE позволяет включил или отключать входные сигналы на пинах.
ID отключает входные сигналы, предотвращая случайные считывания
OD - подключать вход к земле или оставаться в высоком импедансе - это значит оставаться чувствительным к внешним воздействиям.
WPU - значит, что установлены резисторы подтяжки к питанию на входных пинах, чтобы предотвратить плавающие состояния.
WPD - резисторы подтяжки к земле, пин будет в низком уровне, когда не подключен.
PU - ВНЕШНИЙ резистор подтяжки к положительному напряжению.

На некоторые пины уже подключено что-то. Например GPIO-2, к нему подключен светодиод. Сейчас мы разберем пример программы для мигания светодиодом.



Переходим в каталог с esp

Делаем export с помощью алиаса из прошлого видео
```
idf
```

Создаем проект
```
idf.py create-project led
```

Открываем на редактирование и вставляем туда следующий код

```
#include <stdio.h>
#include "sdkconfig.h"
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"
#include "driver/gpio.h"

#define PIN_LED 2


void app_main(void)
{
    gpio_reset_pin( PIN_LED );
    gpio_set_direction( PIN_LED, GPIO_MODE_OUTPUT );
    while (1) {
        gpio_set_level( PIN_LED, 1 );
        vTaskDelay(1000 / portTICK_PERIOD_MS);
        gpio_set_level( PIN_LED, 0 );
        vTaskDelay(1000 / portTICK_PERIOD_MS);
    }
}
```

Разберем написанную выше программу
Первые строки это инклюды требуемых библиотек, включая driver/gpio.h, в который и находядся функции для управления пинами.
После этого мы объявляем PIN_LEN 2. 
На ESP-32-WROOM-32 уже распаян синий LED светодиод подключенный к ножке номер два.
В основной функции мы ресет пина делаем. После задаем направление и в бесконечном цикле включаем и выключаем его каждую секунду.

Спасибо за просмотр
